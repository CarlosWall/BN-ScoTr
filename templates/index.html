# Importar bibliotecas
import pandas as pd
from scipy.stats import kstest
from flask import Flask, request, render_template_string

# Criar um aplicativo Flask
app = Flask(__name__)

# Rota principal
@app.route('/', methods=['GET', 'POST'])
def index():
    result = None

    # Verificar se o formulário foi submetido
    if request.method == 'POST':
        # Obter os dados do formulário
        data_str = request.form['data']
        user_data = list(map(float, data_str.split(',')))

        # Realizar o teste de Kolmogorov-Smirnov
        sample_data = pd.Series(user_data)
        ks_statistic, p_value = kstest(sample_data, 'norm')

        # Preparar o resultado para exibição
        result = {
            'ks_statistic': ks_statistic,
            'p_value': p_value
        }

    # Renderizar o template HTML
    return render_template_string('''
        <html>
        <head><title>Teste de Kolmogorov-Smirnov</title></head>
        <body>
            <h1>Teste de Kolmogorov-Smirnov</h1>
            <form method="post">
                <label for="data">Insira os dados separados por vírgula:</label>
                <input type="text" name="data" required>
                <button type="submit">Realizar Teste</button>
            </form>
            {% if result %}
                <h2>Resultado:</h2>
                <p>Estatística KS: {{ result.ks_statistic }}</p>
                <p>Valor p: {{ result.p_value }}</p>
            {% endif %}
        </body>
        </html>
    ''', result=result)

# Executar o aplicativo
if __name__ == '__main__':
    app.run(debug=True)
